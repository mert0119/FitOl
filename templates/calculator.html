{% extends "base.html" %}
{% block title %}HesaplayÄ±cÄ±{% endblock %}
{% block content %}
<div class="page-header fade-in">
    <h1>ğŸ§® SaÄŸlÄ±k HesaplayÄ±cÄ±</h1>
    <p>BMI, BMR, TDEE ve ideal kilonu hesapla</p>
</div>

<div class="card slide-up" style="margin-bottom:24px">
    <form method="POST">
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Boy (cm)</label>
                <input type="number" name="height" class="form-input"
                    value="{{ results.height if results and 'error' not in results else defaults.height }}"
                    placeholder="175" step="0.1" required>
            </div>
            <div class="form-group">
                <label class="form-label">Kilo (kg)</label>
                <input type="number" name="weight" class="form-input"
                    value="{{ results.weight if results and 'error' not in results else defaults.weight }}"
                    placeholder="75" step="0.1" required>
            </div>
            <div class="form-group">
                <label class="form-label">YaÅŸ</label>
                <input type="number" name="age" class="form-input"
                    value="{{ results.age if results and 'error' not in results else defaults.age }}" placeholder="25"
                    required>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label class="form-label">Cinsiyet</label>
                <select name="gender" class="form-select">
                    <option value="erkek" {{ 'selected' if (results and results.get('gender')=='erkek' ) or (not results
                        and defaults.gender=='erkek' ) }}>Erkek</option>
                    <option value="kadin" {{ 'selected' if (results and results.get('gender')=='kadin' ) or (not results
                        and defaults.gender=='kadin' ) }}>KadÄ±n</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Aktivite Seviyesi</label>
                <select name="activity_level" class="form-select">
                    <option value="dusuk" {{ 'selected' if (results and results.get('activity_level')=='dusuk' ) or (not
                        results and defaults.activity_level=='dusuk' ) }}>DÃ¼ÅŸÃ¼k (masa baÅŸÄ±)</option>
                    <option value="orta" {{ 'selected' if (results and results.get('activity_level')=='orta' ) or (not
                        results and defaults.activity_level=='orta' ) }}>Orta (haftada 3-5 gÃ¼n)</option>
                    <option value="yuksek" {{ 'selected' if (results and results.get('activity_level')=='yuksek' ) or
                        (not results and defaults.activity_level=='yuksek' ) }}>YÃ¼ksek (her gÃ¼n)</option>
                    <option value="cok_yuksek" {{ 'selected' if (results and results.get('activity_level')=='cok_yuksek'
                        ) or (not results and defaults.activity_level=='cok_yuksek' ) }}>Ã‡ok YÃ¼ksek (gÃ¼nde 2 kez)
                    </option>
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">ğŸ§® Hesapla</button>
    </form>
</div>

{% if results %}
{% if results.error is defined %}
<div class="card">
    <p style="color:var(--accent-red);text-align:center;padding:20px">{{ results.error }}</p>
</div>
{% else %}
<div class="result-grid slide-up">
    <div class="result-card">
        <div class="result-value" style="color:{{ results.bmi_color }}">{{ results.bmi }}</div>
        <div class="result-label">BMI (VÃ¼cut Kitle Ä°ndeksi)</div>
        <div class="result-extra">{{ results.bmi_category }}</div>
    </div>
    <div class="result-card">
        <div class="result-value" style="color:var(--accent-orange)">{{ results.bmr }}</div>
        <div class="result-label">BMR (Bazal Metabolizma)</div>
        <div class="result-extra">Dinlenme halinde kalori</div>
    </div>
    <div class="result-card">
        <div class="result-value" style="color:var(--accent-blue)">{{ results.tdee }}</div>
        <div class="result-label">TDEE (GÃ¼nlÃ¼k Harcama)</div>
        <div class="result-extra">Aktivite dahil kalori</div>
    </div>
    <div class="result-card">
        <div class="result-value" style="color:var(--accent-green)">{{ results.ideal_weight }}</div>
        <div class="result-label">Ä°deal Kilo (kg)</div>
        <div class="result-extra">Devine formÃ¼lÃ¼</div>
    </div>
    <div class="result-card">
        <div class="result-value" style="color:var(--accent-purple)">%{{ results.body_fat }}</div>
        <div class="result-label">Tahmini YaÄŸ OranÄ±</div>
        <div class="result-extra">YaklaÅŸÄ±k deÄŸer</div>
    </div>
</div>

<div class="card slide-up" style="margin-top:20px">
    <div class="card-title" style="margin-bottom:16px">ğŸ¯ Kalori Hedefleri</div>
    <div class="result-grid">
        <div class="result-card" style="border-color:var(--accent-green)">
            <div class="result-value" style="color:var(--accent-green);font-size:28px">{{ results.calories_lose }}</div>
            <div class="result-label">Kilo Vermek Ä°Ã§in</div>
            <div class="result-extra">-500 kcal/gÃ¼n</div>
        </div>
        <div class="result-card" style="border-color:var(--accent-blue)">
            <div class="result-value" style="color:var(--accent-blue);font-size:28px">{{ results.calories_maintain }}
            </div>
            <div class="result-label">Kilo Korumak Ä°Ã§in</div>
            <div class="result-extra">TDEE ile eÅŸit</div>
        </div>
        <div class="result-card" style="border-color:var(--accent-orange)">
            <div class="result-value" style="color:var(--accent-orange);font-size:28px">{{ results.calories_gain }}
            </div>
            <div class="result-label">Kilo Almak Ä°Ã§in</div>
            <div class="result-extra">+500 kcal/gÃ¼n</div>
        </div>
    </div>
</div>
{% endif %}
{% endif %}
{% endblock %}